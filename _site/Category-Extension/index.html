<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class="no-js">
<!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <title>使用类别(Category)和扩展(Extension) – DSL'Blog</title> <meta name="description" content="我叫董诗磊,我就是一码农.欢迎来到我的博客"> <meta name="keywords" content=""> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="/assets/img/logo.png"> <meta name="twitter:title" content="使用类别(Category)和扩展(Extension)"> <meta name="twitter:description" content="使用类别(Category)和扩展(Extension)"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="使用类别(Category)和扩展(Extension)"> <meta property="og:description" content="使用类别(Category)和扩展(Extension)"> <meta property="og:url" content="/Category-Extension/"> <meta property="og:site_name" content="DSL'Blog"> <meta property="og:image" content="/assets/img/logo.png"> <link rel="canonical" href="/Category-Extension/"> <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="DSL'Blog Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="/assets/css/main.css"> <!-- JS --> <script src="/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="/favicon.png"> <link rel="shortcut icon" href="/favicon.ico"> <!-- Background Image --> <style type="text/css">body {background-image:url(/assets/img/placeholder-big.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="/assets/img/logo.png" alt="DSL'Blog photo" class="author-photo"> <h4>DSL'Blog</h4> <p>我叫董诗磊,我就是一码农.欢迎来到我的博客</p> </li> <li><a href="/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="mailto:945846242@qq.com" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-envelope-square"></i> Email</a> </li> <li> <a href="http://github.com//dslcoding" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> </ul>
<!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="/posts/">All Posts</a></li> <li><a href="/tags/">All Tags</a></li> </ul> </li> <li><a href="/projects/">Projects</a></li> </ul>
<!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>使用类别(Category)和扩展(Extension)</h1> <h4>01 Apr 2017</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~1 minute </p>
<!-- /.entry-reading-time --> <a class="btn zoombtn" href="/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <h1 id="使用类别category和扩展extension">使用类别(Category)和扩展(Extension)</h1> <hr> <h1 id="1类别">1.类别</h1> <h3 id="先建立一个类别项目我这里就直接给vc加一个类别名字是nslog记得选category而且category是有m文件的">先建立一个类别项目，我这里就直接给VC加一个类别。名字是NSLog。记得选Category，而且Category是有.m文件的。</h3> <p><img src="http://ac-l1vX02tC.clouddn.com/b76a58836532443c945d.png" alt=""> <img src="http://ac-l1vX02tC.clouddn.com/4171593997bcac5e30eb.png" alt=""></p> <h1 id="1先测试">1.先测试：</h1> <h2 id="11添加方法">1.1添加方法</h2>
<pre><code class="language-Objective-C">//先在.h文件中添加一个方法
- (void)printStr:(NSString*)str;
</code></pre>
<pre><code class="language-Objective-C">@implementationViewController (NSLog)

//在.m中实现

- (void)printStr:(NSString*)str

{

NSLog(@"====print==%@",str);

}

@end
</code></pre>
<pre><code class="language-Objective-C">//在VC中调用类别的方法,运行

//[self printStr:@"我叫董诗磊,我就是一码农"];

//成功输出
</code></pre>
<h2 id="12添加属性">1.2添加属性</h2>
<pre><code class="language-Objective-C">@interfaceViewController (NSLog)

//在没有使用runtim建立关联引用建立的字符串

@property(nonatomic,copy)NSString* dsl;

////先添加一个方法

//- (void)printStr:(NSString *)str;

@end
</code></pre>
<pre><code class="language-Objective-C">//在VC中做赋值操作，，，，，然后成功崩溃，

self.dsl=@"我叫董诗磊,我就是一码农";
</code></pre>
<p>崩溃的原因 <img src="http://ac-l1vX02tC.clouddn.com/8364ed8677d3c03fa6af.png" alt=""> 不识别set方法。这里就可以说明是可以添加属性，但是不会自动生成get,set方法。不过这里可以使用runtime建立关联。 如果有这方面的需求可以用runtime具体的下面</p>
<pre><code class="language-Objective-C">导入头文件#import &lt;objc/runtime.h&gt;
</code></pre>
<pre><code class="language-Objective-C">.h

@interfaceViewController (NSLog)

//声明属性

@property(nonatomic,copy)NSString* dsl;

@end

</code></pre>
<pre><code class="language-Objective-C">.m

static NSString*dslKEY =@"dslKEY";

@implementationViewController (NSLog)

- (void)printStr:(NSString*)str

{

NSLog(@"====print==%@",str);

}
</code></pre>
<pre><code class="language-Objective-C">.m

- (void)setDsl:(NSString*)dsl

{

//四个参数原对象，关联时的用来标记的是哪个属性key(可能要添加多个属性)

objc_setAssociatedObject(self, &amp;dslKEY, dsl,OBJC_ASSOCIATION_COPY);

}
- (NSString*)dsl

{

returnobjc_getAssociatedObject(self,&amp;dslKEY);

}
//在VC中测试输出字符串字符串

self.dsl=@"我叫董诗磊,我就是一码农";

NSLog(@"====use runtime ===%@",self.dsl);

成功输出
</code></pre>
<p>以上都是Category添加属性和方法 我的理解是：</p> <h1 id="11类别就是扩展类可以添加方法不能添加成员变量">1.1类别就是扩展类可以添加方法。不能添加成员变量。</h1> <h3 id="12如果添加property的话编译是没有问题但是运行的时候就会报错的也可以用runtime来关联引用实现添加属性">1.2如果添加<a href="https://github.com/property" class="user-mention">@property</a>的话编译是没有问题。但是运行的时候就会报错的。也可以用runtime来关联引用实现添加属性。</h3> <h3 id="13如果类别的方法和原类的方法名重复的话优先调用类别的方法原类的犯法会忽略尽量别这样">1.3如果类别的方法和原类的方法名重复的话，优先调用类别的方法。原类的犯法会忽略。尽量别这样</h3> <h3 id="14继承和类别">1.4继承和类别</h3> <h3 id="141关于继承和类别我的理解是如果这个类有很多子类的时候只需要扩展这个类不影响到原有的代码继承较好要是紧紧扩展方法的话分类更好">1.4.1关于继承和类别我的理解是如果这个类有很多子类的时候，只需要扩展这个类不影响到原有的代码继承较好，要是紧紧扩展方法的话，分类更好。</h3> <h3 id="142类别主要是针对系统提供的一些类系统本身是不提供继承去扩展方法的继承子类继承父类而类别不能扩展属性runtime可以方法也不能重复一旦重复就会替换原有的方法没了">1.4.2类别主要是针对系统提供的一些类，系统本身是不提供继承去扩展方法的。继承子类继承父类，而类别不能扩展属性(runtime可以)，方法也不能重复，一旦重复。就会替换原有的方法。没了</h3> <hr> <h1 id="2扩展">2.扩展</h1> <h1 id="扩展是类别的一种特例也是匿名类可以声明属性和方法声明的方法要实现">扩展是类别的一种特例。也是匿名类，可以声明属性和方法，声明的方法要实现</h1> <h3 id="21先测试给vc加extension">2.1先测试给VC加Extension</h3> <p><img src="http://ac-l1vX02tC.clouddn.com/8fe3dce41b2b974be9fd.png" alt=""> <img src="http://ac-l1vX02tC.clouddn.com/55f2357045a9e0e3a59b.png" alt=""></p> <h3 id="实现方法1就是上面的那一种建立一个extensionh文件然后声明">实现方法1.就是上面的那一种，建立一个Extension.h文件然后声明</h3>
<pre><code class="language-Objective-C">#import"ViewController.h"

@interfaceViewController ()

@property(nonatomic,copy) NSString * vcExten;

- (void)test;

@end
</code></pre>
<pre><code class="language-Objective-C">- (void)viewDidLoad {

[self test];

//扩展在ViewDidLoad里面实现并调试

self.vcExten=@"exten";

NSLog(@"====use exten ==%@",self.vcExten);

}

- (void)test

{

NSLog(@"extension===");

}
</code></pre>
<h3 id="实现方法2就是上面的那一种建立一个extensionh文件然后声明">实现方法2.就是上面的那一种，建立一个Extension.h文件然后声明</h3>
<pre><code class="language-Objective-C">#import"ViewController.h"

#import"ViewController+NSLog.h"

#import"ViewController_VCExten.h"

这个@interface ......@end本身就是扩展

@interfaceViewController()

@end

@implementationViewController

- (void)viewDidLoad {

[superviewDidLoad];



}
</code></pre>
<p><a href="https://github.com/dslcoding/Category-Extension">相关demo</a></p> <div class="entry-meta"> <br> <hr> <span class="entry-tags"></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=/Category-Extension/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=/Category-Extension/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=/Category-Extension/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> </header> <!-- JS --> <script src="/assets/js/jquery-1.12.0.min.js"></script> <script src="/assets/js/jquery.dlmenu.min.js"></script> <script src="/assets/js/jquery.goup.min.js"></script> <script src="/assets/js/jquery.magnific-popup.min.js"></script> <script src="/assets/js/jquery.fitvid.min.js"></script> <script src="/assets/js/scripts.js"></script> <script type="text/javascript"> var disqus_shortname = 'taylantatli'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
