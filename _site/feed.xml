<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xml" href="/feed.xslt.xml"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="http://jekyllrb.com" version="3.2.1">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" /><updated>2017-04-05T11:01:26+08:00</updated><id>/</id><title type="html">DSL’Blog</title><subtitle>我叫董诗磊,我就是一码农.欢迎来到我的博客</subtitle><entry><title type="html">2017-04-05 语录</title><link href="/morning-saying/" rel="alternate" type="text/html" title="2017-04-05 语录" /><published>2017-04-05T00:00:00+08:00</published><updated>2017-04-05T00:00:00+08:00</updated><id>/morning-saying</id><content type="html" xml:base="/morning-saying/">&lt;h1 id=&quot;2017-04-05-语录&quot;&gt;2017-04-05 语录&lt;/h1&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;身安不如心安屋宽不如心宽以自然之道养自然之身以喜悦之身养喜悦之神有所畏惧是做人最基本的良心准则所谓快乐不是财富多而是欲望少做人人品为先才能为次做事明理为先勤奋为次人生要学会不抱怨不等待不盲从&quot;&gt;身安，不如心安；屋宽，不如心宽。以自然之道，养自然之身；以喜悦之身，养喜悦之神。有所畏惧，是做人最基本的良心准则。所谓快乐，不是财富多而是欲望少。做人，人品为先，才能为次；做事，明理为先，勤奋为次。人生要学会不抱怨，不等待，不盲从。&lt;/h2&gt;
&lt;p&gt;美好的一天从自然开始！&lt;/p&gt;</content><summary type="html">2017-04-05 语录</summary></entry><entry><title type="html">iOS沙盒文件处理</title><link href="/sand-box/" rel="alternate" type="text/html" title="iOS沙盒文件处理" /><published>2017-04-02T11:59:21+08:00</published><updated>2017-04-02T11:59:21+08:00</updated><id>/sand-box</id><content type="html" xml:base="/sand-box/">&lt;p&gt;我最近在做项目的时候会用到关于沙盒的处理，以下是常用的操作：&lt;/p&gt;

&lt;h3 id=&quot;1-文件写入操作&quot;&gt;1. 文件写入操作&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;#pragma mark文件写入操作

-(void)writeImageFileToDocument {

//声明一个文件管理器

NSFileManager*manger = [NSFileManagerdefaultManager];

//获取沙盒路径

NSString* writePath = [NSHomeDirectory()stringByAppendingPathComponent:@&quot;/Documents&quot;];

//文件路径

NSString*imagePath=[writePathstringByAppendingPathComponent:@&quot;DSL.jpg&quot;];

if([mangerfileExistsAtPath:imagePath]) {

NSLog(@&quot; image is exist&quot;);

return;

}
//将图片写到沙盒中

NSString*sourcePath = [[NSBundlemainBundle]pathForResource:@&quot;1.jpg&quot;ofType:nil];

NSData*iamgeData = [NSDatadataWithContentsOfFile:sourcePath];

if([iamgeDatawriteToFile:imagePathatomically:YES]) {

NSLog(@&quot;write image success&quot;);

}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;2文件读取操作&quot;&gt;2.文件读取操作&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;#pragma mark文件读取操作

- (void)readImageFileFromDocument{

//获取路径

NSString* imagePath = [NSHomeDirectory()stringByAppendingPathComponent:@&quot;/Documents/DSL.jpg&quot;];

//显示

self.successImage.image= [UIImageimageWithContentsOfFile:imagePath];

}

&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;3删除文件操作&quot;&gt;3.删除文件操作&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;#pragma mark删除文件操作

- (void)deleteDocument{

//获取路径

NSString* imagePath = [NSHomeDirectory()stringByAppendingPathComponent:@&quot;/Documents/DSL.jpg&quot;];

NSFileManager*manger = [NSFileManagerdefaultManager];

NSError* error;

[mangerremoveItemAtPath:imagePatherror:&amp;amp;error];

if(error) {

NSLog(@&quot;delete error == %@&quot;,[errorlocalizedDescription]);

}else{

NSLog(@&quot; delete success&quot;);

}

}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;3在沙盒中新建一个文件夹&quot;&gt;3.在沙盒中新建一个文件夹&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;
#pragma mark在沙盒中新建一个文件夹

- (void)createFilder

{

//沙盒文件的路径

NSString* documentStr = [NSHomeDirectory()stringByAppendingPathComponent:@&quot;/Documents&quot;];

//新的文件的路径

NSString* newFilderPath = [documentStrstringByAppendingPathComponent:@&quot;/DSLFilder&quot;];

NSFileManager* manger = [NSFileManagerdefaultManager];

NSError* error;

//创建操作

[mangercreateDirectoryAtPath:newFilderPathwithIntermediateDirectories:YESattributes:nilerror:&amp;amp;error];

if(error) {

NSLog(@&quot;create filder failed == %@&quot;,[errorlocalizedDescription]);

}else{

NSLog(@&quot;create filder success&quot;);

}

}

&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;4给新建的文件写入一个张图片&quot;&gt;4.给新建的文件写入一个张图片&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;#pragma mark给新建的文件写入一个张图片

- (void)writeImageToNewFilder{

//新的文件的路径

NSString* documentStr = [NSHomeDirectory()stringByAppendingPathComponent:@&quot;/Documents/DSLFilder/DSL.jpg&quot;];

//将图片写到沙盒中

NSString*sourcePath = [[NSBundlemainBundle]pathForResource:@&quot;1.jpg&quot;ofType:nil];

NSError* error;

[[NSFileManagerdefaultManager]copyItemAtPath:sourcePathtoPath:documentStrerror:&amp;amp;error];

//这里用copy

if(error) {

NSLog(@&quot;write image failed==%@&quot;,[errorlocalizedDescription]);

}else{

NSLog(@&quot;write image success&quot;);

}

}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;5获取某个目录下的所有文件名&quot;&gt;5.获取某个目录下的所有文件名&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;#pragma mark获取某个目录下的所有文件名

- (void)getAllDocumentName{

//获取需要查找的路径

NSString* documentPath = [NSHomeDirectory()stringByAppendingPathComponent:@&quot;/Documents/DSLFilder&quot;];

NSArray* namesArray =nil;

NSError* error;

namesArray = [[NSFileManagerdefaultManager]contentsOfDirectoryAtPath:documentPatherror:&amp;amp;error];

if(error) {

}else

{

[namesArrayenumerateObjectsUsingBlock:^(id_Nonnullobj,NSUIntegeridx,BOOL*_Nonnullstop) {

if([objhasSuffix:@&quot;jpg&quot;]) {

NSLog(@&quot;=====%@&quot;,obj);

}

}];

}

}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/dslcoding/sandboxDealWith&quot;&gt;相关demo&lt;/a&gt;
没啦，结束啦&lt;/p&gt;</content><summary type="html">我最近在做项目的时候会用到关于沙盒的处理，以下是常用的操作：</summary></entry><entry><title type="html">iOS随手记(一)</title><link href="/iOS-note1/" rel="alternate" type="text/html" title="iOS随手记(一)" /><published>2017-04-02T11:59:21+08:00</published><updated>2017-04-02T11:59:21+08:00</updated><id>/iOS-note1</id><content type="html" xml:base="/iOS-note1/">&lt;h1 id=&quot;开发随手记一&quot;&gt;开发随手记(一)&lt;/h1&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;1关于给tabbaritem设置属性&quot;&gt;1.关于给tabbarItem设置属性&lt;/h2&gt;
&lt;h3 id=&quot;11设置图片&quot;&gt;1.1设置图片&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;childController.tabBarItem.image= [normalImageimageWithRenderingMode:UIImageRenderingModeAlwaysOriginal];

childController.tabBarItem.selectedImage= [selectedImageimageWithRenderingMode:UIImageRenderingModeAlwaysOriginal];
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;12未选中字体颜色&quot;&gt;1.2未选中字体颜色&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;[[UITabBarItem appearance] setTitleTextAttributes:@{NSForegroundColorAttributeName:unselectColor,NSFontAttributeName:[UIFont fontWithName:foneName size:15]} forState:UIControlStateNormal];

&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;13选中字体颜色&quot;&gt;1.3选中字体颜色&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;[[UITabBarItem appearance] setTitleTextAttributes:@{NSForegroundColorAttributeName:selectColor,NSFontAttributeName:[UIFont fontWithName:foneName size:15]} forState:UIControlStateSelected];

&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;2之前在做项目的时候在push界面的时候总是发现有灰色的阴影在网上查了资料在知道&quot;&gt;2.之前在做项目的时候在push界面的时候总是发现有灰色的阴影。在网上查了资料在知道&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;自从iOS7之后push导航栏出现白色阴影，导航栏的背景色是透明的，或者是黑色阴影估计就是底层Controller的背景色的解决方法是
self.window.backgroundColor = [UIColor whiteColor];
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;3关于通知的注意事项&quot;&gt;3.关于通知的注意事项&lt;/h2&gt;

&lt;p&gt;###3.1在主线程上发送通知&lt;/p&gt;

&lt;p&gt;###3.2注册通知和移除通知一定要成对出现，比如在&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;//一定要成对出现，避免出现bug
- (void)viewWillAppear:(BOOL)animated

{

[super viewWillAppear:animated];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(NSNotificationCenterAction) name:@&quot;NSNotificationCenter&quot;object:nil];

}

- (void)viewWillDisappear:(BOOL)animated

{

[super viewWillDisappear:animated];

[[NSNotificationCenter defaultCenter] removeObserver:self name:@&quot;NSNotificationCenter&quot;object:nil];

}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;33在通知移除的时候不要使用&quot;&gt;3.3在通知移除的时候。不要使用&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;[[NSNotificationCenter defaultCenter] removeObserver:self]
因为上面那个方法可能会把系统注册的通知也给移除了，不要这样操纵，一旦出现bug。不容易发现。正确的移除方式是
[[NSNotificationCenter defaultCenter] removeObserver:self name:@&quot;NSNotificationCenter&quot;object:nil];
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;4获取文件的扩展名&quot;&gt;4.获取文件的扩展名&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;NSString *str  = @&quot;DSL.mp4&quot;;

BOOL isMp4 = [str hasSuffix:@&quot;.mp4&quot;];

//拿到字符串扩展名

NSString *extension = [str pathExtension];

if ([extension isEqualToString:@&quot;mp4&quot;]) {

NSLog(@&quot;我是MP4&quot;);

}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;4.获取cell上的控件&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;- (void)digAction:(UIButton*)btn event:(id)event

{

NSSet*touches =[eventallTouches];

UITouch*touch =[touchesanyObject];

CGPointcurrentTouchPosition = [touchlocationInView:_tableView];

NSIndexPath*indexPath= [_tableViewindexPathForRowAtPoint:currentTouchPosition];

//通过这个index获取cell

}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;本篇结束了。。。&lt;/p&gt;</content><summary type="html">开发随手记(一)</summary></entry><entry><title type="html">iOSExtensionProgram总结</title><link href="/iOSExtension/" rel="alternate" type="text/html" title="iOSExtensionProgram总结" /><published>2017-04-01T11:59:21+08:00</published><updated>2017-04-01T11:59:21+08:00</updated><id>/iOSExtension</id><content type="html" xml:base="/iOSExtension/">&lt;h1 id=&quot;iosextensionprogram总结&quot;&gt;iOSExtensionProgram总结&lt;/h1&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;1上架的问题hostapp和containingapp的版本号必须一致&quot;&gt;1.上架的问题hostapp和containingapp的版本号必须一致，&lt;/h3&gt;

&lt;h3 id=&quot;2关于bundle-identifier的话hostapp-和-containingapp都是独立的app所有你必须申请两个id&quot;&gt;2.关于Bundle identifier的话，hostapp 和 containingapp都是独立的App。所有你必须申请两个ID，&lt;/h3&gt;

&lt;h3 id=&quot;3上面的第二条是申请两个bundle-identifier这个两个bundle-identifier的名字规则是hostappcomdslcontainingappcomdsltodaywight通知扩展还有键盘扩展comdslkeyboard&quot;&gt;3.上面的第二条是申请两个Bundle identifier。这个两个Bundle identifier的名字规则是：hostApp:com.DSL，containingapp:com.DSL.todayWight(通知扩展，还有键盘扩展com.DSL.keyboard)&lt;/h3&gt;

&lt;h3 id=&quot;4关于cocoapods的使用请看我的写的一篇ios-keyboarded-extension&quot;&gt;4.关于cocoapods的使用,请看我的写的一篇iOS Keyboarded Extension&lt;/h3&gt;

&lt;h3 id=&quot;5别的问题遇见在说吧&quot;&gt;5.别的问题遇见在说吧&lt;/h3&gt;</content><summary type="html">iOSExtensionProgram总结</summary></entry><entry><title type="html">关于Keyboard Extension</title><link href="/keyboarded/" rel="alternate" type="text/html" title="关于Keyboard Extension" /><published>2017-04-01T11:59:21+08:00</published><updated>2017-04-01T11:59:21+08:00</updated><id>/keyboarded</id><content type="html" xml:base="/keyboarded/">&lt;h1 id=&quot;关于keyboard-extension&quot;&gt;关于Keyboard Extension&lt;/h1&gt;

&lt;hr /&gt;

&lt;p&gt;写了好几天的keyboarded extension， 说实话这个Extension 有点恶心。我感觉bug挺多的，也不能这样说，可能不经常出现的bug都让我遇到了。下面开始说我遇到到了那些问题，以及是怎么做的。&lt;/p&gt;

&lt;p&gt;声明：本文章不做文档翻译，想看翻译自行查询.(网上的都是翻译不解决实际问题。我已经。。。。) &lt;a href=&quot;http://www.jianshu.com/p/987dfa9f3baf&quot;&gt;键盘扩展翻译&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;1-代码分享hostapp-与containapp代码分享和todayextortion-是一样的这里不做多说-todayextortion&quot;&gt;1 代码分享。hostApp 与containApp代码分享和TodayExtortion 是一样的。这里不做多说 TodayExtortion&lt;/h3&gt;

&lt;h3 id=&quot;2数据共享hostapp-与containapp代码分享和todayextortion-是一样的不做多说-todayextortion&quot;&gt;2数据共享。hostApp 与containApp代码分享和TodayExtortion 是一样的。不做多说 TodayExtortion&lt;/h3&gt;

&lt;h3 id=&quot;3申请idhostapp-与containapp代码分享和todayextortion-是一样的不做多说todayextortion&quot;&gt;3申请ID。hostApp 与containApp代码分享和TodayExtortion 是一样的。不做多说TodayExtortion&lt;/h3&gt;

&lt;p&gt;以上都是共同点，毕竟都是扩展。&lt;/p&gt;

&lt;p&gt;下面我认为是重点(因为我是吃过亏的)：&lt;/p&gt;

&lt;h3 id=&quot;1关于在扩展中使用cocoapods这个会者不难难者恶心&quot;&gt;1.关于在扩展中使用cocoapods，这个会者不难，难者恶心。&lt;/h3&gt;
&lt;p&gt;首先先看stackoverflow&lt;a href=&quot;http://stackoverflow.com/questions/37280077/error-with-cocoapods-link-with-after-update-to-1-0-0&quot;&gt;Extension cocoapods&lt;/a&gt;这个是我在扩展中使用cocoapads出现问题在stackoverflow中找到的目前我找的最佳答案。如果谁知道更好的方法，给我也说说。按照这个上面的说的直接就可以用在hostApp与containApp分别导入相应库就可以了。
&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/5adbe79572ebbc69b073.png&quot; alt=&quot;&quot; /&gt;
主意：提示框如果要是使用第三方的话 ，(算了还是别用第三放了，因为第三方的有sharedApplication，在扩展中获取不到sharedApplication对象)，一定主意。当你按照上面的内容 pod install 成功的时候，你会发现在项目中的hostApp 与containApp中使用的一些库的头文件报错，意思是找不到相应的文件，遇到这种情况，别着急。因为不添加这个use_frameworks!，cocoapads是用static libraries 管理代码的，如果是使的话，cocoapads则是用framework的形式管理代码。所以你必须分别到hostApp 与containApp 中的Target中的BuildPhases 中的 Linked Framework and Libraries 添加相应的第三库，运行一下，顺利通过。这个cocoapds就到此为止。&lt;/p&gt;
&lt;h3 id=&quot;2关于键盘的高度&quot;&gt;2.关于键盘的高度&lt;/h3&gt;
&lt;p&gt;我测试过，讯飞的键盘的高度大概在280左右。于是我也是280.但是我发现一个问题。我的手机是iOS9，但是按照官方文档的自定义高度的方法，不起作用，我在iOS10就可以。于是我🈶️去stackoverflow转了一下，找到了这个。就顺利解决了&lt;a href=&quot;http://stackoverflow.com/questions/36145450/incorrect-keyboard-extension-height-after-rotation&quot;&gt;自定义键盘高度&lt;/a&gt;。我写在viewdidload里面。就是加载不出来。哎。。。&lt;/p&gt;
&lt;h3 id=&quot;3切换输入法&quot;&gt;3.切换输入法&lt;/h3&gt;
&lt;p&gt;官方文档明确表示，没有给用户切换下个输入法的第三方键盘是不会过审核的。大家主意安全。我一开始就用的是这个方法，&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;- (void)handleInputModeListFromView:(nonnull UIView *)view withEvent:(nonnull UIEvent *)event NS_AVAILABLE_IOS(10_0);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;在iOS10上面用的挺爽的。到iOS9上怎么测试就是行。后来看看那个只是针对iOS10 的，尴尬。用这个&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt; //iOS9 和iOS10都是可以的。可以试试
  - (void)advanceToNextInputMode;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;4推荐一些第三方的&quot;&gt;4.推荐一些第三方的。&lt;/h3&gt;
&lt;p&gt;keyboard &lt;a href=&quot;https://github.com/polishedcode/tasty-imitation-keyboard&quot;&gt;Extension第三方&lt;/a&gt;。这个自定义键盘其实也不太难。他是一个控制器 UIInputViewController继承自UIViewController，说白就是一个控制器，除了不能获取sharedApplication对象，别的还可以。还有就是坐标的问题，要主意一下。每个人都有获取坐标的习惯不一样，比如我是这样的self.view.frame.size.with。这个在扩展中是不能获取到的。主意。&lt;/p&gt;

&lt;h3 id=&quot;5记得把requestsopenaccess设置为yes&quot;&gt;5.记得把RequestsOpenAccess设置为YES。&lt;/h3&gt;

&lt;h3 id=&quot;6至今未解决的问题&quot;&gt;6.至今未解决的问题。&lt;/h3&gt;
&lt;p&gt;请求帮助 我的需求是扩展键盘上放了一个uicollectview。每个cell上都加载一个图片。获取图片的步骤：从网络上请求，转化data在转成base64，生成base64字符串。存到数据库。显示的时候，将base64字符串转成data 在转成image；每个图片大概有1Mgif动图吧。不知掉哪个环节出现问题。以至于总是报如下的两个错误。(后来我用工具检测发现内存蹦了600M，用的SDWebimage加载的)。后来用了各种的方法解决也没解决成功就放弃了。&lt;/p&gt;

&lt;h3 id=&quot;61遇见的插件中断和服务中断下面是服务中断的错误信息&quot;&gt;6.1遇见的插件中断和服务中断。下面是服务中断的错误信息&lt;/h3&gt;

&lt;p&gt;2017-03-24 21:37:45.820834 ExpressionBaby[3672:934876] viewServiceDidTerminateWithError:: Error Domain=_UIViewServiceInterfaceErrorDomain Code=3 “(null)” UserInfo={Message=Service Connection Interrupted} 2017-03-24 21:37:48.709876 ExpressionBaby[3672:934876] [App] if we’re in the real pre-commit handler we can’t actually add any new fences due to CA restriction 2017-03-24 21:37:49.222492 ExpressionBaby[3672:934876] viewServiceDidTerminateWithError:: Error Domain=_UIViewServiceInterfaceErrorDomain Code=3 “(null)” UserInfo={Message=Service Connection Interrupted} 2017-03-24 21:37:51.231664 ExpressionBaby[3672:934876] viewServiceDidTerminateWithError:: Error Domain=_UIViewServiceInterfaceErrorDomain Code=3 “(null)” UserInfo={Message=Service Connection Interrupted} 2017-03-24 21:37:53.225378 ExpressionBaby[3672:934876] [App] if we’re in the real pre-commit handler we can’t actually add any new fences due to CA restriction 2017-03-24 21:37:54.500931 ExpressionBaby[3672:934876] [App] if we’re in the real pre-commit handler we can’t actually add any new fences due to CA restriction 2017-03-24 21:37:55.016598 ExpressionBaby[3672:934876] viewServiceDidTerminateWithError:: Error Domain=_UIViewServiceInterfaceErrorDomain Code=3 “(null)” UserInfo={Message=Service Connection Interrupted}&lt;/p&gt;
&lt;h3 id=&quot;61-上架补充上架的时候一定要有数字和英文键盘另一个是协议必须要有的&quot;&gt;6.1 上架补充，上架的时候一定要有数字和英文键盘,另一个是协议必须要有的，&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/7b86d88e2a3da8847506.png&quot; alt=&quot;&quot; /&gt;&lt;/h3&gt;
&lt;p&gt;协议内容就是关于用户的隐私什么的,大概内容就是要保护用户的隐私.(必须要写的)&lt;/p&gt;

&lt;p&gt;我叫董诗磊我就是一码农。&lt;/p&gt;</content><summary type="html">关于Keyboard Extension</summary></entry><entry><title type="html">使用类别(Category)和扩展(Extension)</title><link href="/Category-Extension/" rel="alternate" type="text/html" title="使用类别(Category)和扩展(Extension)" /><published>2017-04-01T11:59:21+08:00</published><updated>2017-04-01T11:59:21+08:00</updated><id>/Category-Extension</id><content type="html" xml:base="/Category-Extension/">&lt;h1 id=&quot;使用类别category和扩展extension&quot;&gt;使用类别(Category)和扩展(Extension)&lt;/h1&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;1类别&quot;&gt;1.类别&lt;/h1&gt;
&lt;h3 id=&quot;先建立一个类别项目我这里就直接给vc加一个类别名字是nslog记得选category而且category是有m文件的&quot;&gt;先建立一个类别项目，我这里就直接给VC加一个类别。名字是NSLog。记得选Category，而且Category是有.m文件的。&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/b76a58836532443c945d.png&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/4171593997bcac5e30eb.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;h1 id=&quot;1先测试&quot;&gt;1.先测试：&lt;/h1&gt;
&lt;h2 id=&quot;11添加方法&quot;&gt;1.1添加方法&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;//先在.h文件中添加一个方法
- (void)printStr:(NSString*)str;
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;@implementationViewController (NSLog)

//在.m中实现

- (void)printStr:(NSString*)str

{

NSLog(@&quot;====print==%@&quot;,str);

}

@end
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;//在VC中调用类别的方法,运行

//[self printStr:@&quot;我叫董诗磊,我就是一码农&quot;];

//成功输出
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;12添加属性&quot;&gt;1.2添加属性&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;@interfaceViewController (NSLog)

//在没有使用runtim建立关联引用建立的字符串

@property(nonatomic,copy)NSString* dsl;

////先添加一个方法

//- (void)printStr:(NSString *)str;

@end
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;//在VC中做赋值操作，，，，，然后成功崩溃，

self.dsl=@&quot;我叫董诗磊,我就是一码农&quot;;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;崩溃的原因
&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/8364ed8677d3c03fa6af.png&quot; alt=&quot;&quot; /&gt;
不识别set方法。这里就可以说明是可以添加属性，但是不会自动生成get,set方法。不过这里可以使用runtime建立关联。
如果有这方面的需求可以用runtime具体的下面&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;导入头文件#import &amp;lt;objc/runtime.h&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;.h

@interfaceViewController (NSLog)

//声明属性

@property(nonatomic,copy)NSString* dsl;

@end

&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;.m

static NSString*dslKEY =@&quot;dslKEY&quot;;

@implementationViewController (NSLog)

- (void)printStr:(NSString*)str

{

NSLog(@&quot;====print==%@&quot;,str);

}
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;.m

- (void)setDsl:(NSString*)dsl

{

//四个参数原对象，关联时的用来标记的是哪个属性key(可能要添加多个属性)

objc_setAssociatedObject(self, &amp;amp;dslKEY, dsl,OBJC_ASSOCIATION_COPY);

}
- (NSString*)dsl

{

returnobjc_getAssociatedObject(self,&amp;amp;dslKEY);

}
//在VC中测试输出字符串字符串

self.dsl=@&quot;我叫董诗磊,我就是一码农&quot;;

NSLog(@&quot;====use runtime ===%@&quot;,self.dsl);

成功输出
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;以上都是Category添加属性和方法
我的理解是：&lt;/p&gt;

&lt;h1 id=&quot;11类别就是扩展类可以添加方法不能添加成员变量&quot;&gt;1.1类别就是扩展类可以添加方法。不能添加成员变量。&lt;/h1&gt;

&lt;h3 id=&quot;12如果添加property的话编译是没有问题但是运行的时候就会报错的也可以用runtime来关联引用实现添加属性&quot;&gt;1.2如果添加@property的话编译是没有问题。但是运行的时候就会报错的。也可以用runtime来关联引用实现添加属性。&lt;/h3&gt;

&lt;h3 id=&quot;13如果类别的方法和原类的方法名重复的话优先调用类别的方法原类的犯法会忽略尽量别这样&quot;&gt;1.3如果类别的方法和原类的方法名重复的话，优先调用类别的方法。原类的犯法会忽略。尽量别这样&lt;/h3&gt;

&lt;h3 id=&quot;14继承和类别&quot;&gt;1.4继承和类别&lt;/h3&gt;

&lt;h3 id=&quot;141关于继承和类别我的理解是如果这个类有很多子类的时候只需要扩展这个类不影响到原有的代码继承较好要是紧紧扩展方法的话分类更好&quot;&gt;1.4.1关于继承和类别我的理解是如果这个类有很多子类的时候，只需要扩展这个类不影响到原有的代码继承较好，要是紧紧扩展方法的话，分类更好。&lt;/h3&gt;
&lt;h3 id=&quot;142类别主要是针对系统提供的一些类系统本身是不提供继承去扩展方法的继承子类继承父类而类别不能扩展属性runtime可以方法也不能重复一旦重复就会替换原有的方法没了&quot;&gt;1.4.2类别主要是针对系统提供的一些类，系统本身是不提供继承去扩展方法的。继承子类继承父类，而类别不能扩展属性(runtime可以)，方法也不能重复，一旦重复。就会替换原有的方法。没了&lt;/h3&gt;
&lt;hr /&gt;
&lt;h1 id=&quot;2扩展&quot;&gt;2.扩展&lt;/h1&gt;

&lt;h1 id=&quot;扩展是类别的一种特例也是匿名类可以声明属性和方法声明的方法要实现&quot;&gt;扩展是类别的一种特例。也是匿名类，可以声明属性和方法，声明的方法要实现&lt;/h1&gt;

&lt;h3 id=&quot;21先测试给vc加extension&quot;&gt;2.1先测试给VC加Extension&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/8fe3dce41b2b974be9fd.png&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/55f2357045a9e0e3a59b.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;h3 id=&quot;实现方法1就是上面的那一种建立一个extensionh文件然后声明&quot;&gt;实现方法1.就是上面的那一种，建立一个Extension.h文件然后声明&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;#import&quot;ViewController.h&quot;

@interfaceViewController ()

@property(nonatomic,copy) NSString * vcExten;

- (void)test;

@end
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;- (void)viewDidLoad {

[self test];

//扩展在ViewDidLoad里面实现并调试

self.vcExten=@&quot;exten&quot;;

NSLog(@&quot;====use exten ==%@&quot;,self.vcExten);

}

- (void)test

{

NSLog(@&quot;extension===&quot;);

}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;实现方法2就是上面的那一种建立一个extensionh文件然后声明&quot;&gt;实现方法2.就是上面的那一种，建立一个Extension.h文件然后声明&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;#import&quot;ViewController.h&quot;

#import&quot;ViewController+NSLog.h&quot;

#import&quot;ViewController_VCExten.h&quot;

这个@interface ......@end本身就是扩展

@interfaceViewController()

@end

@implementationViewController

- (void)viewDidLoad {

[superviewDidLoad];



}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/dslcoding/Category-Extension&quot;&gt;相关demo&lt;/a&gt;&lt;/p&gt;</content><summary type="html">使用类别(Category)和扩展(Extension)</summary></entry><entry><title type="html">开发随手记(二)</title><link href="/iOS-note2/" rel="alternate" type="text/html" title="开发随手记(二)" /><published>2017-04-01T11:59:21+08:00</published><updated>2017-04-01T11:59:21+08:00</updated><id>/iOS-note2</id><content type="html" xml:base="/iOS-note2/">&lt;h1 id=&quot;开发随手记二&quot;&gt;开发随手记(二)&lt;/h1&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;在项目中积累中的错误&quot;&gt;在项目中积累中的错误&lt;/h1&gt;

&lt;p&gt;1.ld: can’t link with a main executable file ‘/Users/apple/Library/Developer/Xcode/DerivedData/LePaiDemo-ftsuwgzvjdjwzghgkuefbzvdkvey/Build/Products/Debug-iphoneos/LePaiDemo.app/LePaiDemo’ for architecture armv7clang: error: unable to execute command: Segmentation fault: 11clang: error: linker command failed due to signal (use -v to see invocation)
  &lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/32763884c73603e8276e.png&quot; alt=&quot;&quot; /&gt;
    把Architectures的debug改为NO就可以&lt;/p&gt;

&lt;p&gt;2.Code Sign error: Provisioning profile does not match bundle identifier: The provisioning profile specified in your build settings (“ColorKey Distribution”) has an AppID of “com.iAppsLLC.ColorKey” which does not match your bundle identifier “ com.iAppsLLC.ColorKey.MyKeyBoard”.
解决方法是：在build Settings 里有一项 Packaging项  里边有个Product Bundle Identifier  需要与plist文件里的Bundle Identifier 保持一致。最后修改完成以后clean一下充跑吧。如果证书，App ID ，以及描述文件没有设置错误，那就应该没有问题了。&lt;/p&gt;

&lt;p&gt;3.因为有些第三方库不支持bitcode。 关闭BItcode&lt;/p&gt;</content><summary type="html">开发随手记(二)</summary></entry><entry><title type="html">关于Today Extension</title><link href="/today-extension/" rel="alternate" type="text/html" title="关于Today Extension" /><published>2016-09-02T11:59:21+08:00</published><updated>2016-09-02T11:59:21+08:00</updated><id>/today-extension</id><content type="html" xml:base="/today-extension/">&lt;h1 id=&quot;关于today-extension&quot;&gt;关于Today Extension&lt;/h1&gt;

&lt;p&gt;第一次写Extension功能，下面是我的一些步骤。这是对&lt;a href=&quot;https://developer.apple.com/library/content/documentation/General/Conceptual/ExtensibilityPG/&quot;&gt;iOS App Extension Programming Guide&lt;/a&gt;的链接。&lt;/p&gt;

&lt;p&gt;效果图
 &lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/96a2456ba7b86754dd5f.gif&quot; alt=&quot;1.效果图&quot; /&gt;
 最近写了一个app需要用到app扩展(App Extension)，本次主要讲的是TodayExtension这个扩展，&lt;a href=&quot;https://developer.apple.com/library/content/documentation/General/Conceptual/ExtensibilityPG/Today.html&quot;&gt;关于Toady的官方介绍自己先看&lt;/a&gt;，废话不多说直接写代码，既然写了那就从申请appID开始：&lt;/p&gt;
&lt;h1 id=&quot;1先新建一个项目&quot;&gt;1.先新建一个项目&lt;/h1&gt;
&lt;h3 id=&quot;2申请id&quot;&gt;2.申请ID：&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/7f3efb74e794561cdf4d.png&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/80b8867cba66a1929a0f.png&quot; alt=&quot;&quot; /&gt;
然后点击注册完成；&lt;/p&gt;
&lt;h3 id=&quot;3申请app-groups&quot;&gt;3.申请App Groups&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/1cb58b390dbb5deb4c54.png&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/7275b2a6a7bdb69170c3.png&quot; alt=&quot;&quot; /&gt;
然后点击继续按钮，在点击注册，就会出现以下界面
&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/ee405194982e3324bdaf.png&quot; alt=&quot;&quot; /&gt;
去iOSAppIDS这个界面找到Name为：BlobBlobWidget的ID，点击编辑
然后
&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/76f3046f289180ed7307.png&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/caad348a05a49cd01ab5.png&quot; alt=&quot;&quot; /&gt;
点击assign就可以了&lt;/p&gt;
&lt;h3 id=&quot;4找到id发现下面都变绿说明配置成功了如果不是的话估计你得重复在来一次&quot;&gt;4.找到ID发现下面都变绿说明配置成功了，如果不是的话，估计你得重复在来一次&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/c75d1f73f2e4dce09b9c.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;h1 id=&quot;2开始代码项目中的配置&quot;&gt;2.开始代码项目中的配置&lt;/h1&gt;
&lt;h3 id=&quot;21新建扩展&quot;&gt;2.1新建扩展&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/cb99dbd24f51d209b728.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;h3 id=&quot;22先配置general&quot;&gt;2.2先配置General&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/70afb2a17787624f1467.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;h3 id=&quot;23在配置capabilities&quot;&gt;2.3在配置Capabilities&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/b9e3044909cad2ef2d2a.png&quot; alt=&quot;&quot; /&gt;
好了以上是宿主app也就是主app配置完成。&lt;/p&gt;
&lt;h1 id=&quot;6下面配置todayextension&quot;&gt;6.下面配置TodayExtension&lt;/h1&gt;
&lt;h3 id=&quot;61配置general&quot;&gt;6.1配置General&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/34945dd01ed65a48043d.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;h3 id=&quot;62配置capabilities&quot;&gt;6.2配置Capabilities&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/90631f921812fc0525ee.png&quot; alt=&quot;&quot; /&gt;
以上都配置完了运行以下，正常了就是正常的，不正常就是不正常了，顺便自己看看哪里出的问题，bug在哪里自己心里最清楚，别人都是爱莫能助啊。&lt;/p&gt;
&lt;h1 id=&quot;7关于调试&quot;&gt;7.关于调试&lt;/h1&gt;
&lt;p&gt;在调试的时候xcode会弹出一个调试框框，让你选择一个主APP。主APP就是要选择你建立的APP；不知道看懂没有。&lt;/p&gt;
&lt;h1 id=&quot;8数据的共享&quot;&gt;8数据的共享&lt;/h1&gt;

&lt;h3 id=&quot;81通过用nsuserdefaults共享数据&quot;&gt;8.1通过用NSUserDefaults共享数据&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;存储：

#pragma mark存储data

- (void)saveData:(UITextField*)TF{

NSUserDefaults* defaults = [[NSUserDefaultsalloc]initWithSuiteName:@&quot;group.DSLBlobWidget&quot;];

[defaultssetObject:TF.textforKey:@&quot;DSL&quot;];

[defaultssynchronize];

}
获取：

#pragma mark从app那里加载数据以便达到数据共享的目的

- (NSString*)getDatafromMainAPP{

NSUserDefaults*defaults = [[NSUserDefaultsalloc]initWithSuiteName:@&quot;group.DSLBlobWidget&quot;];

return[defaultsobjectForKey:@&quot;DSL&quot;];

}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;82通过nsfilemanger存图片&quot;&gt;8.2通过NSFileManger存图片&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;//copy image to Library

- (void)copyImageToLibrary{

NSString * path = [[NSBundle mainBundle]pathForResource:@&quot;DSL.png&quot; ofType:nil];

NSFileManager * manger = [NSFileManager defaultManager];

NSString * documentPath = [NSHomeDirectory() stringByAppendingPathComponent:@&quot;/Library/Caches/DSL.png&quot;];

NSLog(@&quot;%@&quot;,documentPath);

NSError * error = nil;

if (path != nil) {

if (![manger fileExistsAtPath:documentPath]) {

[manger copyItemAtPath:path toPath:documentPath error:&amp;amp;error];

if (error) {

NSLog(@&quot;==copy error==%@&quot;,[error

localizedDescription]);

}

}

}else{

NSLog(@&quot;sourcePath is nil&quot;);

}

[self copyImage];

}

#pragma mark从app那里加载数据以便达到数据共享的目的（NSFileManger 存图片）

- (void)copyImage{

NSError * error = nil;

NSURL * contentURL = [[NSFileManager defaultManager]containerURLForSecurityApplicationGroupIdentifier:@&quot;group.DSLBlobWidget&quot;];

NSString * newPath = [contentURL URLByAppendingPathComponent:@&quot;/Library/Caches/DSL.png&quot;].path;

[[NSFileManager

defaultManager]copyItemAtPath:[NSHomeDirectory()

stringByAppendingPathComponent:@&quot;/Library/Caches/DSL.png&quot;]

toPath:newPath error:&amp;amp;error];

if (error) {

NSLog(@&quot;copy error==%@&quot;,[error localizedDescription]);

}

}
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&quot;9代码的共享&quot;&gt;9.代码的共享&lt;/h1&gt;

&lt;h3 id=&quot;91第一步和创建app-extension一样new-target选择cocoa-touch-framework来创建framework&quot;&gt;9.1第一步：和创建APP Extension一样，New-&amp;gt;Target，选择Cocoa Touch Framework来创建framework&lt;/h3&gt;

&lt;h3 id=&quot;92第二部起名字我的起的名字是dslwidgetframework&quot;&gt;9.2第二部：起名字，我的起的名字是DSLWidgetFramework&lt;/h3&gt;

&lt;h3 id=&quot;93&quot;&gt;9.3&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/02a4f537451a8f98f257.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;h1 id=&quot;10在app-extension中不能使用的api&quot;&gt;10.在APP Extension中不能使用的API&lt;/h1&gt;
&lt;h3 id=&quot;101-access-a-sharedapplication-object-and-so-cannot-use-any-of-the-methods-on-that-object&quot;&gt;10.1 Access a sharedApplication object, and so cannot use any of the methods on that object&lt;/h3&gt;
&lt;p&gt;不能获取sharedApplication对象&lt;/p&gt;

&lt;h3 id=&quot;102use-any-api-marked-in-header-files-with-thens_extension_unavailablemacro-or-similar-unavailability-macro-or-any-api-in-an-unavailable-frameworkfor-example-in-ios-80-the-healthkit-framework-and-eventkit-ui-framework-are-unavailable-to-app-extensions&quot;&gt;10.2Use any API marked in header files with theNS_EXTENSION_UNAVAILABLEmacro, or similar unavailability macro, or any API in an unavailable framework，For example, in iOS 8.0, the HealthKit framework and EventKit UI framework are unavailable to app extensions.&lt;/h3&gt;

&lt;p&gt;不能使用API的标志性头文件 和 theNS_EXTENSION_UNAVAILABLE 宏定义，还有一些不能用的框架API,例如HealthKit framework and EventKit UI framework。&lt;/p&gt;

&lt;h3 id=&quot;103access-the-camera-or-microphone-on-an-ios-device-an-imessage-app-unlike-other-app-extensions-does-have-access-to-these-resources-as-long-as-it-correctly-configures-thenscamerausagedescriptionandnsmicrophoneusagedescriptioninfoplistkeys&quot;&gt;10.3Access the camera or microphone on an iOS device (an iMessage app, unlike other app extensions, does have access to these resources, as long as it correctly configures theNSCameraUsageDescriptionandNSMicrophoneUsageDescriptionInfo.plistkeys)&lt;/h3&gt;

&lt;p&gt;不能获取麦克风和照相机的权限(iMessage 不同于其它的应用扩展，只要配置相关的应用权限就可以直接使用了)&lt;/p&gt;

&lt;h3 id=&quot;104perform-long-running-background-tasks&quot;&gt;10.4Perform long-running background tasks&lt;/h3&gt;

&lt;p&gt;不能长期的在后台运行&lt;/p&gt;

&lt;h3 id=&quot;105receive-data-using-airdrop&quot;&gt;10.5Receive data using AirDrop&lt;/h3&gt;

&lt;p&gt;不能使用AirDrop接收相关的数据&lt;/p&gt;

&lt;p&gt;以上个人翻译，建议&lt;a href=&quot;https://developer.apple.com/library/content/documentation/General/Conceptual/ExtensibilityPG/ExtensionOverview.html#//apple_ref/doc/uid/TP40014214-CH2-SW6&quot;&gt;查看官方文档&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;11-todayextension的进入设置的快捷方式&quot;&gt;11 .TodayExtension的进入设置的快捷方式&lt;/h1&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;//打开Wi-Fi

[self.extensionContextopenURL:[NSURLURLWithString:@&quot;Prefs:root=WIFI&quot;]completionHandler:^(BOOLsuccess) {

}];
//打开蜂窝网络

[self.extensionContextopenURL:[NSURLURLWithString:@&quot;Prefs:root=MOBILE_DATA_SETTINGS_ID&quot;]completionHandler:^(BOOLsuccess) {

}];
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cyanzhong/app-tutorials/blob/master/prefs.md&quot;&gt;更多方式请点击这里,请尽量按照以上方式避免被拒绝.&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;12与主app的交互&quot;&gt;12.与主APP的交互&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/9b23ab7bdf2069aa01df.png&quot; alt=&quot;&quot; /&gt;
在扩展中的代码：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;- (void)OpenAcstion{

[self.extensionContextopenURL:[NSURLURLWithString:@&quot;DSLTodayWidget://SecondVC&quot;]completionHandler:^(BOOLsuccess) {

}];

}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;在主APP中的代码：
AppDelegate&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;- (BOOL)application:(UIApplication*)app openURL:(NSURL*)url options:(NSDictionary *)options

{

NSLog(@&quot;=====%@&quot;,url.scheme);

NSLog(@&quot;===%@===%@&quot;,url.host,url.absoluteString);

if([url.absoluteStringhasPrefix:@&quot;DSLTodayWidget&quot;]) {

if([url.hostisEqualToString:@&quot;SecondVC&quot;]) {

//判断是否是直接跳入到添加页面

//self.window.rootViewController = [[SecondVC alloc]init];

UIViewController*rootNav = (UIViewController*)self.window.rootViewController;

[rootNavpresentViewController:[[SecondVCalloc]init]animated:YEScompletion:nil];

}

}

returnYES;

}
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&quot;13折叠与展开&quot;&gt;13.折叠与展开&lt;/h1&gt;

&lt;h3 id=&quot;131首先折叠与展开只有ios10才有所以先要判断系统的版本&quot;&gt;13.1首先折叠与展开只有iOS10才有，所以先要判断系统的版本&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;if ([[UIDevice currentDevice].systemVersion integerValue]&amp;gt;=10) {

self.extensionContext.widgetLargestAvailableDisplayMode = NCWidgetDisplayModeExpanded;

}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后实现协议，点击展开或者是折叠会触发这个协议就是NCWidgetProviding协议&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;- (void)widgetActiveDisplayModeDidChange:(NCWidgetDisplayMode)activeDisplayMode withMaximumSize:(CGSize)maxSize

{

//    NCWidgetDisplayModeCompact, // Fixed height

//    NCWidgetDisplayModeExpanded,

if (activeDisplayMode == NCWidgetDisplayModeCompact ) {

//高度最低为110

self.preferredContentSize = CGSizeMake([UIScreen mainScreen].bounds.size.width ,110);

}else{

//因为机子型号不一样所以最大搞多可能不一样，这里设置最大

self.preferredContentSize = CGSizeMake([UIScreen mainScreen].bounds.size.width ,MAXFLOAT);

}

}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;除了上面的协议外还有一个协议就是更新扩展UI界面的协议&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-Objective-C&quot;&gt;该协议的具体用法，我没有探究，需要更新这个界面的时候就在这方法里面写

- (void)widgetPerformUpdateWithCompletionHandler:(void (^)(NCUpdateResult))completionHandler {

// Perform any setup necessary in order to update the view.

// If an error is encountered, use NCUpdateResultFailed

// If there's no update required, use NCUpdateResultNoData

// If there's an update, use NCUpdateResultNewData

completionHandler(NCUpdateResultNewData);

}
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&quot;14关于使用storyboard或者是代码&quot;&gt;14.关于使用StoryBoard或者是代码&lt;/h1&gt;

&lt;h3 id=&quot;141使用stryboard如果使用自己定义的类的storyboard的话需要修改info文件&quot;&gt;14.1使用StryBoard如果使用自己定义的类的StoryBoard的话，需要修改info文件&lt;/h3&gt;

&lt;h3 id=&quot;142&quot;&gt;14.2&lt;img src=&quot;http://ac-l1vX02tC.clouddn.com/c08223452b889dbf901b.png&quot; alt=&quot;&quot; /&gt;&lt;/h3&gt;
&lt;p&gt;使用这个方法不要忘记在todayViewController的ViewDidLoad中设置preferredContentSize属性调整大小。
14关于上架，上架的时候扩展app一定是单独的appID，且命名时比如：主appID是com.DSLWidget那么扩展appID是com.DSLWidget.widExten这样尽量按照这个格式来，不要问我为什么之前上架踩过的坑&lt;/p&gt;

&lt;p&gt;本次关于Today Extension之旅结束。随后补充。有错请立即通知我，谢谢。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://dslcoding.github.io/today-extension/&quot;&gt;dd&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;我叫董诗磊我就是一码农。&lt;/p&gt;</content><summary type="html">关于Today Extension</summary></entry></feed>
